Banking Example: Edge Route + Hostname (Complete Setup)

рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдмреИрдВрдХ рдХреА NetBanking application OpenShift рдкрд░ deploy рдХрд░рдиреА рд╣реИред

URL рдЪрд╛рд╣рд┐рдП:

https://netbanking.mybank.com


рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдпрд╣ 3 рдЪреАрдЬрд╝реЗрдВ рдмрдирд╛рдиреА рд╣реЛрдВрдЧреА:

1я╕ПтГг Deployment
2я╕ПтГг Service
3я╕ПтГг Route (Edge + hostname)

тЬЕ Step 1: Deployment (Application Pod рдмрдирд╛рдирд╛)

рд╣рдо example рдХреЗ рд▓рд┐рдП nginx use рдХрд░реЗрдВрдЧреЗ (banking UI рдХреА рдЬрдЧрд╣)ред

deployment.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: netbanking
spec:
  replicas: 1
  selector:
    matchLabels:
      app: netbanking
  template:
    metadata:
      labels:
        app: netbanking
    spec:
      containers:
      - name: netbanking
        image: nginx
        ports:
        - containerPort: 80


Apply:

oc apply -f deployment.yaml


Check:

oc get pods

тЬЕ Step 2: Service рдмрдирд╛рдирд╛ (Pod рдХреЛ cluster рдХреЗ рдЕрдВрджрд░ expose рдХрд░рдирд╛)

service.yaml

apiVersion: v1
kind: Service
metadata:
  name: netbanking-service
spec:
  selector:
    app: netbanking
  ports:
  - port: 80
    targetPort: 80


Apply:

oc apply -f service.yaml


Check:

oc get svc

ЁЯПж рдЕрдм Banking Scenario рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ тАФ Edge Route
Banking URL рдЪрд╛рд╣рд┐рдП:
https://netbanking.mybank.com


DNS рдореЗрдВ рдпрд╣ hostname OpenShift router рдкрд░ already point рд╣реЛрддрд╛ рд╣реИред

тЬЕ Step 3: Edge Route + Hostname рдмрдирд╛рдирд╛

рдпрд╣ banking рдореЗрдВ рд╕рдмрд╕реЗ common рд╣реИред

Command:

oc create route edge netbanking-route \
  --service=netbanking-service \
  --port=80 \
  --hostname=netbanking.mybank.com

NOTE: 
Aap route ka naam netbanking-route, myroute123, 7478484indj, ya kuch bhi rakh sakte ho.
Sirf itna dhyan rahe ki wo naam us project mein pehle se kisi aur route ke liye use na ho raha ho.


ЁЯСЙ рдпрд╣ рдПрдХ Edge-secured URL рдмрдирд╛рдПрдЧрд╛
ЁЯСЙ SSL termination рд╕рд┐рд░реНрдл Router рдкрд░ рд╣реЛрдЧрд╛
ЁЯСЙ Backend Pod рдХреЛ traffic HTTP рдореЗрдВ рдЬрд╛рдПрдЧрд╛

Check route:

oc get route


Output:

netbanking-route   netbanking.mybank.com   edge   netbanking-service

ЁЯЪж Traffic Flow (Bank рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ)
1) Customer Browser

HTTPS request рднреЗрдЬрддрд╛ рд╣реИ:

https://netbanking.mybank.com

2) OpenShift Router

тЬФ SSL certificate check рдХрд░рддрд╛ рд╣реИ
тЬФ Traffic decrypt рдХрд░рддрд╛ рд╣реИ
тЬФ рдЕрдм internal request HTTP рдмрди рдЬрд╛рддреА рд╣реИ

3) Router тЖТ Pod

HTTP traffic netbanking-service тЖТ netbanking Pod рддрдХ рдЬрд╛рддрд╛ рд╣реИ

4) Pod Response тЖТ Router

Router response рдХреЛ рджреБрдмрд╛рд░рд╛ encrypt рдХрд░рддрд╛ рд╣реИ (HTTPS)

5) Router тЖТ Browser

Browser рдХреЛ secure response рд╡рд╛рдкрд╕ рдорд┐рд▓рддрд╛ рд╣реИ

ЁЯФР рдХреНрдпреЛрдВ Banking рдореЗрдВ Edge Route рдЙрдкрдпреЛрдЧ рд╣реЛрддрд╛ рд╣реИ?
рдХрд╛рд░рдг	Explanation
SSL certificate рдПрдХ рдЬрдЧрд╣ manage рд╣реЛрддрд╛ рд╣реИ	Pod рдкрд░ certificate рдирд╣реАрдВ рд▓рдЧрд╛рдирд╛ рдкрдбрд╝рддрд╛
Performance рдЕрдЪреНрдЫрд╛ рд░рд╣рддрд╛ рд╣реИ	Pod рдХреЛ SSL рдХрд╛ load рдирд╣реАрдВ
Internal network secure рд╣реЛрддрд╛ рд╣реИ	рдЗрд╕рд▓рд┐рдП HTTP рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ
Banking UI рд╣рд▓реНрдХрд╛ рдФрд░ fast рд░рд╣рддрд╛ рд╣реИ	Router decryption рдХрд░рддрд╛ рд╣реИ
ЁЯФз Complete Commands Recap
oc apply -f deployment.yaml
oc apply -f service.yaml

oc create route edge netbanking-route \
  --service=netbanking-service \
  --port=80 \
  --hostname=netbanking.mybank.com
