тЬЕ Networking - Secure Route Practical (Hindi + Practical Steps)

Scenario:
рдЖрдкрдХреЗ рдкрд╛рд╕ business рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдПрдХ deployment рд╣реИ: marketing
рдФрд░ рдпрд╣ рдПрдХ unsecured route рд╕реЗ expose рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: marketing-route

рдЖрдкрдХреЛ:
тЬФ SSL Certificate + Key generate рдХрд░рдирд╛ рд╣реИ
тЬФ Route рдХреЛ secure рдмрдирд╛рдирд╛ рд╣реИ (Edge TLS termination)
тЬФ рдРрдк URL рд╕рд┐рд░реНрдл HTTPS рд╕реЗ open рд╣реЛрдЧрд╛:
https://webapplication.apps.domain1.exampledomain.com

тнР Step 1 тАФ Existing Resources Check (Verify Deployment, Service, Route)
oc project business
oc get all

Output рдЬреИрд╕рд╛ рдЖрдкрдиреЗ рджрд┐рдпрд╛ рд╣реИ:

pod/marketing-d47f96bc-jl9h6     Running
service/marking-svc              80/TCP
route/marketing-route            edge unsecured (None)

рдЗрд╕рдХрд╛ рдорддрд▓рдм route рдЕрднреА unencrypted (HTTP) рд╣реИред

тнР Step 2 тАФ cert-manager.sh Script рдЦреЛрдЬреЗрдВ

рдЖрдкрдХреЛ cert-manager script рдЪрд▓рд╛рдиреА рд╣реИ рдЬреЛ certificate generate рдХрд░рддреА рд╣реИред

find / -name "cert-manager.sh"

рдорд╛рди рд▓реЛ script рдпрд╣рд╛рдБ рдорд┐рд▓реА:
/root/cer-manager/cert-manager.sh

cp /root/cer-manager/cert-manager.sh .
chmod +x cert-manager.sh


тнР Step 3 тАФ SSL Certificate рдФрд░ Key Generate рдХрд░рдирд╛

script рдЪрд▓рд╛рдУ:

./cert-manager.sh

рдЬреЛ details рджреЗрдиреА рд╣реИрдВ:

Common Name (CN): webapplication.apps.domain1.exampledomain.com
Organization Unit (OU): IT
Organization Name (O): HAT
Locality Name (L): California
State Name (ST): NV
Country Name (C): US


рдЗрд╕рд╕реЗ рдиреАрдЪреЗ рджреЛ рдлрд╛рдЗрд▓реЗрдВ generate рд╣реЛрдВрдЧреА:
webapplication.apps.domain1.exampledomain.com.crt
webapplication.apps.domain1.exampledomain.com.key
рдпреЗ certificate рдФрд░ private key рд╣реИрдВред

тнР Step 4 тАФ рдкреБрд░рд╛рдирд╛ unsecured Route delete рдХрд░реЗрдВ
oc delete route marketing-route -n business


тнР Step 5 тАФ рдирдпрд╛ Secure Route рдмрдирд╛рдирд╛ (HTTPS + Edge Termination)

рдЕрдм рдирдпрд╛ secure route create рдХрд░реЗрдВрдЧреЗред
YAML рдХреЗ рд╕рд╛рде рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдкрд░ CLI рдЖрд╕рд╛рди рд╣реИред

тЬФ Method 1: CLI рд╕реЗ Secure Route рдмрдирд╛рдирд╛
oc create route edge marketing-route \
--service=marking-svc \
--cert=webapplication.apps.domain1.exampledomain.com.crt \
--key=webapplication.apps.domain1.exampledomain.com.key \
--hostname=webapplication.apps.domain1.exampledomain.com


рдпрд╣ route рдЕрдм encrypted рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

тнР Step 6 тАФ Verify Secure Route
oc get route marketing-route

рдЖрдкрдХреЛ рдРрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛:

HOST/PORT: webapplication.apps.domain1.exampledomain.com
TLS TERMINATION: edge
CERTIFICATE: uploaded

тнР Step 7 тАФ Application Access

рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдЦреЛрд▓реЗрдВ:

https://webapplication.apps.domain1.exampledomain.com


рдЕрдм connection encrypted рд╣реИред


ЁЯФ╣ "Edge Termination" рдХреНрдпрд╛ рд╣реИ?

OpenShift router SSL decrypt рдХрд░рддрд╛ рд╣реИред
Backend app HTTP рдкрд░ рд░рд╣рддреА рд╣реИред

Client тЖТ HTTPS тЖТ OpenShift Router тЖТ HTTP тЖТ Pod
